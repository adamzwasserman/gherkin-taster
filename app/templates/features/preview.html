<!-- HTMX Partial: Gherkin Preview Panel -->
{% if parsed_feature %}
<div class="space-y-4">
    <!-- Feature Header -->
    <div class="border-l-4 border-indigo-500 pl-4">
        <h4 class="text-lg font-semibold text-gray-900">{{ parsed_feature.feature.name }}</h4>
        {% if parsed_feature.feature.description %}
        <p class="text-sm text-gray-600 mt-2 whitespace-pre-wrap">{{ parsed_feature.feature.description }}</p>
        {% endif %}
    </div>

    <!-- Scenarios -->
    {% for scenario in parsed_feature.scenarios %}
    <div class="bg-gray-50 rounded-lg p-4">
        <h5 class="font-medium text-gray-900 mb-2">
            <span class="text-indigo-600">{{ scenario.keyword }}:</span> {{ scenario.name }}
        </h5>

        {% if scenario.description %}
        <p class="text-sm text-gray-600 mb-3 whitespace-pre-wrap">{{ scenario.description }}</p>
        {% endif %}

        <!-- Steps -->
        <div class="space-y-1">
            {% for step in scenario.steps %}
            <div class="flex items-start">
                <span class="font-mono text-xs text-gray-500 w-16">{{ step.keyword }}</span>
                <span class="text-sm text-gray-800">{{ step.text }}</span>
            </div>
            {% if step.doc_string %}
            <div class="ml-16 bg-white border border-gray-200 rounded p-2 text-xs font-mono text-gray-700 whitespace-pre-wrap">
{{ step.doc_string }}
            </div>
            {% endif %}
            {% if step.data_table %}
            <div class="ml-16">
                <table class="min-w-full text-xs border border-gray-200">
                    {% for row in step.data_table %}
                    <tr class="{{ 'bg-gray-100 font-medium' if loop.first else 'bg-white' }}">
                        {% for cell in row %}
                        <td class="border border-gray-200 px-2 py-1">{{ cell }}</td>
                        {% endfor %}
                    </tr>
                    {% endfor %}
                </table>
            </div>
            {% endif %}
            {% endfor %}
        </div>

        <!-- Examples (for Scenario Outlines) -->
        {% if scenario.examples %}
        <div class="mt-3">
            <h6 class="font-medium text-gray-700 mb-2">Examples:</h6>
            <table class="min-w-full text-xs border border-gray-200">
                {% for row in scenario.examples %}
                <tr class="{{ 'bg-gray-100 font-medium' if loop.first else 'bg-white' }}">
                    {% for cell in row %}
                    <td class="border border-gray-200 px-2 py-1">{{ cell }}</td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </table>
        </div>
        {% endif %}
    </div>
    {% endfor %}

    <!-- Tags -->
    {% if parsed_feature.feature.tags %}
    <div class="flex flex-wrap gap-2">
        {% for tag in parsed_feature.feature.tags %}
        <span class="inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-blue-100 text-blue-800">
            {{ tag }}
        </span>
        {% endfor %}
    </div>
    {% endif %}
</div>
{% else %}
<!-- No content or parsing in progress -->
<div class="text-center py-8">
    <p class="text-gray-500">Write Gherkin syntax to see preview...</p>
</div>
{% endif %}
